geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_y_date(limits = c(start_date - 1, end_date + 10))
}
gantt2(res$results)
debugSource('C:/Users/Student/Box Sync/R Critical Path/dev/critical_path_OO.R', echo=TRUE)
end_date
typeof(end_date)
typeof(start_date)
as.Date(start_date)
t <- as.Date(start_date)
typeof(t)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies: ", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_y_date(limits = c(start_date - 1, end_date + 10))
}
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies: ", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date - 1, end_date + 10))
}
gantt2(res$results)
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date - 1, end_date + 5))
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies: ", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date - 1, end_date + 5))
}
gantt2(res$results)
?geom_text
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 5) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date - 1, end_date + 5))
}
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 2) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date - 1, end_date + 5))
}
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 3) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date - 1, end_date + 5))
}
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 3) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date - 1, end_date + 5)) +
theme(legend.position = "none")
}
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$name, levels = rev(df$name)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 3) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date, end_date + 2)) +
theme(legend.position = "none")
}
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Dependencies:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$id, levels = rev(df$id)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 3) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date, end_date + 2)) +
theme(legend.position = "none")
}
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Depends:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$id, levels = rev(df$id)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 3) +
xlab(NULL) +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date, end_date + 2)) +
theme(legend.position = "none")
}
gantt2(res$results)
gantt2(res$results, gantt = T)
gantt(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Depends:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$id, levels = rev(df$id)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 3) +
xlab("Task ID") +
ylab(NULL) +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date, end_date + 1)) +
theme(legend.position = "none")
}
gantt2(res$results, gantt = T)
gantt(res$results)
gantt2(res$results)
gantt2 <- function(df, start_date = Sys.Date()){
df <- df[-c(1, nrow(df)), ]
if(df[1, "is_critical"] == TRUE){
cols <- c("#41a9f4", "#f4424b")
}else{
cols <- c("#f4424b", "#41a9f4")
}
# Make dependency labels
deps <- c()
for(i in 1:nrow(df)){
row <- df[i, ]
if(trimws(row$pred_id) == "%id_source%"){
deps <- c(deps, "")
}else{
deps <- c(deps, paste("Depends:\n", gsub(" ", ", ", trimws(row$pred_id))))
}
}
dfr <- data.frame(
name        = factor(df$id, levels = rev(df$id)),
start.date  = as.Date(c(df$start_date)),
end.date    = as.Date(c(df$end_date)),
critical = c(df$is_critical),
deps = deps
)
mdfr <- gather(dfr, measure.vars = c("start.date", "end.date"))
# Make labels only show up once
for(i in 1:(nrow(mdfr)/2)){
mdfr[i, "deps"] <- ""
}
duration <- sum(df[df$is_critical, ]$duration)
end_date <- start_date + duration
ggplot(mdfr, aes(value, name)) +
geom_line(aes(colour = critical), size = 8) +
geom_text(aes(label = deps), hjust = 0, nudge_x = 0.05, size = 3) +
xlab(NULL) +
ylab("Task ID") +
scale_color_manual(values = cols) +
scale_x_date(limits = c(start_date, end_date + 1)) +
theme(legend.position = "none")
}
gantt2(res$results)
